{% extends 'home/base.html' %}
{% block content %}
  {% load my_filters %}

  <h2>Enter a tech skill</h2>

  <form action="" method="get">
    {% csrf_token %}
    {{ form }}
    <input type="submit" value="Enter" />
  </form>

  {% if query %}
    <h5>"{{query}}" matched {{res_count}}/{{all_posts}} jobposts in last 30 days across the US</h5>
    <h5>Highest occuring skills in the results:</h5>
    <div id='wordcloud'></div>
    <!-- <div>{{words}}</div> -->

    <h4>Jobpost results by city</h4>
    <div id="loc_post_graph">loc_post_graph</div>
    <div>date_counts: {{date_counts}}</div>
  {% endif %}

{% endblock %}


{% block javascript %}
  <!-- https://github.com/wvengen/d3-wordcloud/blob/master/README.md -->
  <script>
    d3.wordcloud()
     .size([800, 400])
     .selector('#wordcloud')
     .words({{words|safe}})
     .scale('sqrt')
     .spiral('archimedean')
     .start();
  </script>
{% endblock %}
