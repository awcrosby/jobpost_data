<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
</head>
<style>
    body {
        font: 10px sans-serif;
    }

    svg text {
        fill: grey;
        font-size: 11px;
    }

    svg .values text {
        pointer-events: none;
        stroke-width: 0.5px;
    }

    .groups:hover {
        cursor: pointer;
        font-weight: bold;
    }
</style>

<body>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="http://vizjs.org/viz.v1.1.0.min.js"></script>
    <script>
        var data = {{ data|safe }};

        //var colors = {{ colors|safe }};
        var colors = {}

        var sortOrder = {{ sortOrder|safe }};

        function sort(a, b) {
            return d3.ascending(sortOrder.indexOf(a), sortOrder.indexOf(b));
        }

        var ch = viz.ch().data(data)
            .padding(.01)
            .sort(sort)
            .innerRadius(430)
            .outerRadius(450)
            .duration(1000)
            .chordOpacity(0.3)
            .labelPadding(.03)
            .fill(function(d) {
                //return null;
                return colors[d];
            });

        var width = 1200,
            height = 1100;

        var svg = d3.select("body").append("svg").attr("height", height).attr("width", width);

        svg.append("g").attr("transform", "translate(600,550)").call(ch);

        // adjust height of frame in bl.ocks.org
        d3.select(self.frameElement).style("height", height + "px").style("width", width + "px");
    </script>
</body>
</html>
